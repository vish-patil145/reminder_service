<div id="task_<%= task.id %>" class="group bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden border border-gray-100 <%= 'opacity-60 bg-gray-50' if task.status == 'completed' %>">
  <div class="p-6">
    <!-- Task Header -->
    <div class="flex items-start justify-between mb-4">
      <div class="flex-1 min-w-0 pr-4">
        <h3 class="text-lg font-semibold text-gray-900 mb-2 group-hover:text-primary-600 transition-colors <%= 'line-through text-gray-500' if task.status == 'completed' %>">
          <%= task.title %>
        </h3>
        <% if task.description.present? %>
          <p class="text-sm text-gray-600 line-clamp-2 leading-relaxed"><%= task.description %></p>
        <% end %>
      </div>
      
      <!-- Status Badge with better styling -->
      <span class="flex-shrink-0 inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold <%= status_badge_class(task) %> whitespace-nowrap">
        <span class="mr-1"><%= status_icon(task) %></span>
        <%= task.status.titleize %>
      </span>
    </div>

    <!-- Task Meta Information with better spacing -->
    <div class="flex flex-wrap items-center gap-4 text-sm mb-5 pb-4 border-b border-gray-100">
      <!-- Time with icon -->
      <div class="flex items-center gap-2 <%= 'text-red-600 font-semibold' if task.overdue? && task.status != 'completed' %>">
        <svg class="w-5 h-5 <%= task.overdue? && task.status != 'completed' ? 'text-red-500' : 'text-primary-500' %>" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <span class="font-medium">
          <%= task.scheduled_at.strftime("%b %d, %I:%M %p") %>
        </span>
      </div>
      
      <!-- Assignee with avatar -->
      <div class="flex items-center gap-2 text-gray-600">
        <div class="w-7 h-7 rounded-full bg-gradient-to-br from-primary-400 via-secondary-400 to-accent-400 flex items-center justify-center text-white text-xs font-bold shadow-sm">
          <%= task.assignee.email_address[0].upcase %>
        </div>
        <span class="font-medium"><%= task.assignee.email_address.split('@').first %></span>
      </div>
    </div>
    
    <!-- Action Buttons with better styling -->
    <% if task.assignee == current_user && task.status != 'completed' %>
      <div class="flex gap-3">
        <%= button_to complete_task_path(task), method: :patch, class: "flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-accent-500 to-accent-600 hover:from-accent-600 hover:to-accent-700 text-white rounded-xl text-sm font-semibold transition-all shadow-sm hover:shadow-md transform hover:-translate-y-0.5" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"/>
          </svg>
          Complete
        <% end %>
        <%= button_to reschedule_task_path(task), method: :patch, class: "flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-secondary-500 to-secondary-600 hover:from-secondary-600 hover:to-secondary-700 text-white rounded-xl text-sm font-semibold transition-all shadow-sm hover:shadow-md transform hover:-translate-y-0.5" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
          </svg>
          Tomorrow
        <% end %>
      </div>
    <% elsif task.status == 'completed' %>
      <div class="flex items-center justify-center py-2 text-accent-600 font-medium">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        Task Completed
      </div>
    <% end %>
  </div>
</div>